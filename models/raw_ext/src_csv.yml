# models/raw_ext/src_csv.yml
version: 2

sources:
  - name: excel_raw
    loader: gcloud storage
    schema: raw_ext

    tables:
      - name: fund_data_ext
        description: "fund data extracted from csv"
        external:
          location: "gs://dwd-technical-case-gcp-bucket/excel/20250906/fund_data.csv"
          options:
            format: csv
            skip_leading_rows: 1
        columns:
          - name: fund_name
            data_type: string
            description: "Fund name"
          - name: _fund_size_
            data_type: float64
            description: "Committed fund size (in USD)"
          - name: transaction_type
            data_type: string
            description: "Type of transaction (e.g., call, distribution)"
          - name: transaction_index
            data_type: float64
            description: "Transaction index or sequence number"
          - name: transaction_date
            data_type: date
            description: "Transaction date"
          - name: _transaction_amount_
            data_type: float64
            description: "Transaction amount (in USD)"
          - name: sector
            data_type: string
            description: "Sector classification of the fund or transaction"
          - name: country
            data_type: string
            description: "Country associated with the fund or transaction"
          - name: region
            data_type: string
            description: "Region associated with the fund or transaction"

      - name: company_data_ext
        description: "company data extracted from csv"
        external:
          location: "gs://dwd-technical-case-gcp-bucket/excel/20250906/company_data.csv"
          options:
            format: csv
            skip_leading_rows: 1
        columns:
          - name: fund_name
            data_type: string
            description: "Parent fund name"
          - name: company_id
            data_type: int64
            description: "Unique identifier for the company"
          - name: company_name
            data_type: string
            description: "Company legal name"
          - name: transaction_type
            data_type: string
            description: "Type of transaction (e.g., investment, follow-on)"
          - name: transaction_index
            data_type: int64
            description: "Sequence index of the transaction"
          - name: transaction_date
            data_type: date
            description: "Date of the transaction"
          - name: transaction_amount
            data_type: float64
            description: "Transaction amount (in USD)"
          - name: sector
            data_type: string
            description: "Company sector classification"
          - name: country
            data_type: string
            description: "Company country"
          - name: region
            data_type: string
            description: "Company region"
